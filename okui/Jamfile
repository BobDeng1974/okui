rule okui-frameworks ( properties * ) {
	if <target-os>iphone in $(properties) || <target-os>darwin in $(properties) {
		local result ;
		result += <framework>OpenGL ;
		return $(result) ;
	}
}


cpp-pch pch :
	../foundation//project_defaults
	../foundation//foundation_headers
	src/pch.h
:
	<conditional>@not-multi-arch
	<include>./include
;

lib okui :
	pch
	[ glob-tree *.cpp : tests tools ]
	../foundation//foundation
	../third-party/libpng//png
	../jni//jni
:
	<include>./include
	<link>static
: :
	<include>./include
	<conditional>@okui-frameworks
	<target-os>linux:<linkflags>-lm
	<target-os>android:<linkflags>"-lGLESv2"
;

jar okui_jar : [ glob-tree *.java ] :
	<build>no
	<target-os>android:<build>yes
	<classpath>java
;

explicit okui_jar ;
