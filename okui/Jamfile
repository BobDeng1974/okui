rule okui-frameworks ( properties * ) {
	if <target-os>iphone in $(properties) || <target-os>appletv in $(properties) || <target-os>darwin in $(properties) {
		local result ;
		result += <framework>OpenGL ;
		return $(result) ;
	}
}

cpp-pch pch :
	../foundation//project_defaults
	../foundation//foundation_headers
	src/pch.h
:
	<conditional>@use-pch
	<include>./include
;

lib libturbojpeg : ../third-party/needs//libjpeg-turbo : <name>turbojpeg ;
lib libm        : : <name>m ;
lib libGLESv2   : : <name>GLESv2 <link>shared ;

lib okui :
	pch
	[ glob-tree-ex src : *.cpp ]
	../foundation//foundation
	../third-party/libpng//png
	libturbojpeg
	../jshackle//jshackle
:
	<include>./include
	<link>static
	<target-os>linux:<source>libm
	<target-os>android:<source>libGLESv2
: :
	<include>./include
	<conditional>@okui-frameworks
;
