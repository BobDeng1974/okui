path-constant OKUI_TEST_RESOURCES_PATH : ./resources ;

alias okui-tests-common :
    [ glob-tree-ex src : *.cpp : android.cpp ]
    ..//okui
    ../../third-party/gtest//gtest/<link>static
    ../../third-party/sdl//SDL2/<link>static
: : :
    <define>OKUI_TEST_RESOURCES_PATH=\\\"$(OKUI_TEST_RESOURCES_PATH)\\\"
;

lib okui-gtests : okui-tests-common :
    <conditional>@unit-test-library
    <link>static
;

exe okui-tests :
    okui-tests-common/<link>static
    ../../third-party/gtest//gtest_main/<link>static
:
    <conditional>@unit-test-executable
    <build>no
    <target-os>darwin:<build>yes
    <target-os>darwin:<framework>CoreVideo
;

lib okui-tests-android :
    okui-tests-common/<link>static
    src/android.cpp
:
    <include>../../apk-wrapper/include
    <link>shared
    <build>no
    <target-os>android:<build>yes
;

install dist/android : okui-tests-android :
    <build>no
    <target-os>android:<build>yes
;
